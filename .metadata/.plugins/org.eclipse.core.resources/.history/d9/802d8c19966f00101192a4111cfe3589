/*
A hospital wants to automate its patient registration system. When a new patient arrives, staff members will enter details such as:
Patient Name
Age
Disease
Admission Date
Doctor Assigned
This data should be saved into a patient table in the hospital's database.*/


package com.ClassWork;
import java.sql.*;
import java.util.Scanner;

public class PatientDB 
{

	public static void main(String[] args)
	{
		
		  Scanner sc = new Scanner(System.in);

			try {
				
				Class.forName("com.mysql.cj.jdbc.Driver");
				Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/Hospital", "root", "Hyma@2002");

		
			//	Statement stmt=con.createStatement();
				
			//	String sql="CREATE TABLE IF NOT EXISTS PatientTable("+"id INT PRIMARY KEY AUTO_INCREMENT,"
				//		+ "name VARCHAR(100),"+"age INT,"+"disease VARCHAR(100) ,"+"Admission_Date DATE,"+" doctor_Assigned VARCHAR(100))";
				
				
				
			
				
	             //Taking input of patient details
	            
	            System.out.print("Enter Patient Name: ");
	            String name = sc.nextLine();
	          

	            System.out.print("Enter Age: ");
	            int age = sc.nextInt();
	            sc.nextLine(); 

	            System.out.print("Enter Disease: ");
	            String disease = sc.nextLine();

	            System.out.print("Enter Admission Date (yyyy-mm-dd): ");
	            String Admission_Date = sc.nextLine();

	            System.out.print("Enter Doctor Assigned: ");
	            String doctor_Assigned = sc.nextLine();
	            
	       /*     //Inserting values to PatientTable
	            
	            String insertSQL = "INSERT INTO PatientTable (name, age, disease, admission_date, doctor_assigned) VALUES (?, ?, ?, ?, ?)";
	           
	            
	            PreparedStatement pstmt = con.prepareStatement(insertSQL);
	           
	            pstmt.setString(1, name);
	            pstmt.setInt(2, age);
	            pstmt.setString(3,disease);
	            pstmt.setDate(4, Date.valueOf(Admission_Date)); // converts to java.sql.Date
	            pstmt.setString(5, doctor_Assigned);
	            
	            
	            int rowsInserted = pstmt.executeUpdate();
	            if(rowsInserted>0)
	            {
	                  
	            System.out.println(rowsInserted + " Inserted registered successfully.\n");
	           
	           	}
	            ResultSet rs = pstmt.executeQuery("SELECT * FROM PatientTable");        
	            
	           */
	            String deleteSQL="DELETE FROM PatientTable where id=?";
	            
	            PreparedStatement pstmt = con.prepareStatement(deleteSQL);
	            
	            pstmt.setInt(1,1);
	            
	            int rowsDeleted = pstmt.executeUpdate();
				
				if (rowsDeleted > 0) 
				{
	                System.out.println("Employee with id has been deleted successfully.");
	            }
	            else
	            {
	                System.out.println("No Employee found with ID");
	            }

        		ResultSet rs = pstmt.executeQuery("SELECT * FROM PatientTable");

	            while (rs.next())
	            {
	                System.out.println("ID: " + rs.getInt("id"));
	                System.out.println("Name: " + rs.getString("name"));
	                System.out.println("Age: " + rs.getInt("age"));
	                System.out.println("Disease: " + rs.getString("disease"));
	                System.out.println("Admission Date: " + rs.getDate("Admission_Date"));
	                System.out.println("Doctor Assigned: " + rs.getString("doctor_Assigned"));
	                System.out.println("----------------------------");
	            }

	            rs.close();    
				con.close();
				sc.close();
			 }
			catch (Exception e)
			{
			e.printStackTrace();
					
			}
	}
}

